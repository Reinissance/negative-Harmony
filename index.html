<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>negative Harmony</title>

  <!-- Generated javascript library includes -->
  <script type="application/javascript" src="./heavy.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.35/Tone.js"></script>
  <script src="https://surikov.github.io/webaudiofont/npm/dist/WebAudioFontPlayer.js"></script>
  <script src="https://unpkg.com/@tonejs/midi"></script>
  <script type='text/javascript' src='https://platform-api.sharethis.com/js/sharethis.js#property=672a9419d01e2b00125529f4&product=sop' async='async'></script>

  <style>
    .horizontal {
      display: flex;
      justify-content: space-evenly;
      align-items: center;
    }

    .widget {
      max-width: 900px;
      margin: auto;
    }

    .row {
      width: 100%;
      margin-bottom: 10px;
    }

    .col {
      display: inline-block;
    }

    .events {
      vertical-align: top;
      margin: 10px;
    }

    .title {
      width: 80%;
      margin: 0 auto;
    }

    .transport {
      padding-left: 10px;
    }

    .parameter-name {
      width: 35%;
      text-align: right;
    }

    .parameter-slider {
      width: 45%;
      padding-left: 10px;
    }

    .parameter-slider input {
      vertical-align: middle;
      width: 100%;
    }

    .parameter-value {
      width: 10%;
      padding-left: 10px;
      text-align: left;
    }

    .link {
      margin: 10px 10px 0 0;
      float: right;
    }

    span {
      text-align: right;
    }
  </style>

  <script type="application/javascript" src="./main.js"></script>
  
</head>

<body>
  <div class="widget">
    <div class="title horizontal">
      <div class="col">
        <h2>negative Harmony</h2>
        <p><em>Playback MIDI-Files possibly in negative Harmony.</em></p>
      </div>
      <div id="col_transport" class="col transport"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle, rgb(255, 255, 255) 0%, rgba(0, 0, 0, 0.687) 100%); z-index: 9999; display: flex; justify-content: center; align-items: center;">
        <div style="text-align: center;">
          <h3 id="start_prompt" style="color: red;">please click start here first:</h3>
          <label>
            start / stop
            <input type="checkbox" id="transportButton" onchange="toggleTransport();">
          </label>
        </div>
      </div>
    </div>
    <div style="border: 1px solid #ccc; padding: 10px;">
      <input type="range" id="progress-input" style="width: 100%; display: none;" min="0" max="100" step="0.01" value="0">
      <div class="horizontal" style="text-align: center;">
        <div class="sharethis-sticky-share-buttons"></div>
        <a style="display: none;" href="javascript:void(0);" onclick="share();" title="Image from freeiconspng.com: https://www.freeiconspng.com/img/40132" id="hiddenShareButton"><img src="https://www.freeiconspng.com/uploads/share-sharing-icon-29.png" width="50" alt="Share, sharing icon"/></a>
        <div style="display: flex; flex-direction: column; margin: 10px;">
          <h3>Midi-Player</h3>
          <p><em>Upload a local file:</em></p>
          <input type="file" id="midiUpload" accept=".mid" style="margin-bottom: 10px;" />
          <p><em>...or try to paste an url here:<br>(e.g. from <a href="https://bitmidi.com/" target="_blank">https://bitmidi.com/</a>,<br>hit enter to submit.)</em></p>
          <input type="text" id="midiUrl" style="margin-bottom: 10px;" placeholder="url to downloadable midi file" onkeypress="if(event.key === 'Enter') reloadPageWithUrl()"/>
          <button id="playMidi" style="margin-bottom: 10px; color: red; font-weight: bold;">Play MIDI</button>
          <label for="speedControl">Playback Speed: </label>
          <input type="range" id="speedControl" min="0.5" max="2" value="1" step="0.01" />
        </div>
        <div>
          <div id="midiIn">
            <div>MIDI input:</div>
            <select id="midiInputs" onchange="console.log(this.value)"></select>
          </div>
          <div id="midiOut" style="margin-top: 20px;">
            <div>MIDI output:</div>
            <select id="midiOutputs" onchange="console.log(this.value)"></select>
          </div>
        </div>
        <div style="text-align: center;">
          <div class="col events">
            MIDI Panic:<br>
            <button type="button" id="trigger_allNotesOff" onclick="sendEvent_allNotesOff();">allNotesOff</button><br>
          </div>
        </div>
      </div>
    </div>
    <div style="display: flex; justify-content: space-around; align-items: center; border: 1px solid #ccc; padding: 10px; margin-top: 20px;">
      <div>
        <h2>Mode:</h2>
        <div>
          <input id="parameter_mode_1" type="radio" name="mode" value="0.0" onchange="updateSlider_mode(value);">
          <label for="parameter_mode_1">normal</label><br>
          <input id="parameter_mode_2" type="radio" name="mode" value="1.0" onchange="updateSlider_mode(value);">
          <label for="parameter_mode_2"
            title="Mirrors notes around the axis of the middle D (C Major becomes A minor and vice versa).">lefthand
            Piano</label><br>
          <input id="parameter_mode_3"
            title="Mirrors notes around an axis between the 3rds of the root note (eg. C Major becomes C minor and vice versa)."
            type="radio" name="mode" value="2.0" checked onchange="updateSlider_mode(value);">
          <label for="parameter_mode_3">negative Harmony</label><br>
        </div>
      </div>
      <div id="negRoots">
        <h3>Root:</h3>
        <div>
          <input id="parameter_negRoot_1" type="radio" name="negRoot" value="57"
            onchange="updateSlider_negRoot(value);">
          <label for="parameter_negRoot_1">Gb</label><br>
          <input id="parameter_negRoot_2" type="radio" name="negRoot" value="64"
            onchange="updateSlider_negRoot(value);">
          <label for="parameter_negRoot_2">Db</label><br>
          <input id="parameter_negRoot_3" type="radio" name="negRoot" value="59"
            onchange="updateSlider_negRoot(value);">
          <label for="parameter_negRoot_3">Ab</label><br>
          <input id="parameter_negRoot_4" type="radio" name="negRoot" value="66"
            onchange="updateSlider_negRoot(value);">
          <label for="parameter_negRoot_4">Eb</label><br>
          <input id="parameter_negRoot_5" type="radio" name="negRoot" value="61"
            onchange="updateSlider_negRoot(value);">
          <label for="parameter_negRoot_5">Bb</label><br>
          <input id="parameter_negRoot_6" type="radio" name="negRoot" value="56"
            onchange="updateSlider_negRoot(value);">
          <label for="parameter_negRoot_6">F</label><br>
          <input id="parameter_negRoot_7" type="radio" name="negRoot" value="63" checked
            onchange="updateSlider_negRoot(value);">
          <label for="parameter_negRoot_7">C</label><br>
          <input id="parameter_negRoot_8" type="radio" name="negRoot" value="58"
            onchange="updateSlider_negRoot(value);">
          <label for="parameter_negRoot_8">G</label><br>
          <input id="parameter_negRoot_9" type="radio" name="negRoot" value="65"
            onchange="updateSlider_negRoot(value);">
          <label for="parameter_negRoot_9">D</label><br>
          <input id="parameter_negRoot_10" type="radio" name="negRoot" value="60"
            onchange="updateSlider_negRoot(value);">
          <label for="parameter_negRoot_10">A</label><br>
          <input id="parameter_negRoot_11" type="radio" name="negRoot" value="67"
            onchange="updateSlider_negRoot(value);">
          <label for="parameter_negRoot_11">E</label><br>
          <input id="parameter_negRoot_12" type="radio" name="negRoot" value="62"
            onchange="updateSlider_negRoot(value);">
          <label for="parameter_negRoot_12">B(deutsch: H)</label><br>
        </div>
      </div>
      <div id="perOkt">
        <h3>perOktave</h3>
        <div class="col parameter-slider">
          <input id="parameter_perOktave" type="checkbox" checked
            onchange="updateSlider_perOktave(this.checked ? 1.0 : 0.0);">
        </div>
      </div>
    </div>
    <div class="horizontal" style="margin-top: 20px; border: 1px solid #ccc; padding: 10px;">
      <div>
      <label for="reverbSelect">Reverb: </label>
      <select id="reverbSelect" onchange="setIR(this.value);">
        <option value="182806__unfa__ir-02-gunshot-in-a-chapel-mixed">Chapel</option>
        <option value="192228__ligidium__shower-clap-open">Shower</option>
        <option value="463610__greybrother01__winter-forest-01">Winterforest</option>
        <option value="479080__allistersandwich__cathedral_saint_pierre">Cathedral</option>
      </select>
      </div>
      <div>
        <label for="reverbVolume">Reverb Volume: </label>
        <input type="range" id="reverbVolume" min="0.0" max="1.5" step="0.01" value="0.5" oninput="setReverbGain(this.value);" />
      </div>
    </div>
    <br>
    <div style="margin-top: 20px; border: 1px solid #ccc; padding: 10px;">
      <h1 id="midiFileName" class="title" style="width: 100%;"></h1>
      <div id="file_controls"
        style="display: flex; flex-direction: row; justify-content: space-between; margin: 10px; flex-wrap: wrap;"></div>
      <div class="row">
        <span class="link"><em>powered by <a
              href="https://github.com/Wasted-Audio/hvcc" target="_blank"><strong>heavy,</strong></a> <a href="https://tonejs.github.io/" target="_blank"><strong>Tone.js</strong></a> and <a href="https://github.com/surikov/webaudiofont" target="_blank"><strong>WebAudioFont</strong></a></em></span>
      </div>
    </div>
  </div>
</body>

</html>